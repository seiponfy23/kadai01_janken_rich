<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>【提出用】じゃんけんリッチver.</title>
    <link rel="stylesheet" href="css/main.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<!-- header -->
<header class="text-gray-600 body-font">
    <div class="container mx-auto flex flex-wrap pt-5 flex-col md:flex-row items-center">
        <a class="flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-10 h-10 text-white p-2 bg-indigo-500 rounded-full" viewBox="0 0 24 24">
        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
        </svg>
        <span class="ml-3 text-xl text-gray-700">4人揃えてワンピースごっこ</span>
        </a>
    <!-- <nav class="md:ml-auto flex flex-wrap items-center text-base justify-center">
        <a class="mr-5 hover:text-gray-900">First Link</a>
        <a class="mr-5 hover:text-gray-900">Second Link</a>
        <a class="mr-5 hover:text-gray-900">Third Link</a>
    </nav> -->
    <!-- <button id="save" class="inline-flex items-center bg-gray-100 border-0 py-1 px-3 focus:outline-none hover:bg-gray-200 rounded text-base mt-4 md:mt-0">save
        <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-4 h-4 ml-1" viewBox="0 0 24 24">
        <path d="M5 12h14M12 5l7 7-7 7"></path>
        </svg>
    </button> -->
    </div>
</header>
<!-- header -->

<section>
    <section class="text-gray-600 body-font">
        <div class="container px-5 mx-auto">
            <div class="flex flex-col text-center w-full mb-14">
                <button id="start" class="flex mx-auto mt-8 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg">クイズで仲間を集める</button>
                <button id="j_start" class="flex mx-auto mt-8 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg">みんなで拳をあげてグーを揃える</button>
                <button id="reset" class="flex mx-auto mt-8 text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg">リセット</button>
                <h1 id="qnop" class="sm:text-3xl text-2xl font-medium title-font my-4 text-gray-900">Qestion No.<span id="qno"></span></h1>
                <h1 id="game" class="sm:text-3xl text-2xl font-medium title-font my-4 text-gray-900">結果は…グーが<span id="gunum">何</span>個、<span id="judge">「……」</span></h1>
                <p id="question" class="lg:w-2/3 mx-auto leading-relaxed text-base">この問題の答えは何か、次の4つから答えよ。</p>

            </div>
            <section class="flex justify-center items-center">
            </section>
            <div id="quiz" class="flex flex-wrap -m-4 text-center">
                <div class="p-4 md:w-1/4 sm:w-1/2 w-full">
                    <div name="choices" data-value="0" class="border-2 border-gray-200 px-4 py-6 rounded-lg cursor-pointer">
                        <h2 id="choices0" class="title-font font-medium text-3xl text-gray-900">選択肢１</h2>
                    </div>
                </div>
                <div class="p-4 md:w-1/4 sm:w-1/2 w-full">
                    <div name="choices" data-value="1" class="border-2 border-gray-200 px-4 py-6 rounded-lg cursor-pointer">
                        <h2 id="choices1" class="title-font font-medium text-3xl text-gray-900">選択肢２</h2>
                    </div>
                </div>
                <div class="p-4 md:w-1/4 sm:w-1/2 w-full">
                    <div name="choices" data-value="2" class="border-2 border-gray-200 px-4 py-6 rounded-lg cursor-pointer">
                        <h2 id="choices2" class="title-font font-medium text-3xl text-gray-900">選択肢３</h2>
                    </div>
                </div>
                <div class="p-4 md:w-1/4 sm:w-1/2 w-full">
                    <div name="choices" data-value="3" class="border-2 border-gray-200 px-4 py-6 rounded-lg cursor-pointer">
                    <h2 id="choices3" class="title-font font-medium text-3xl text-gray-900">選択肢４</h2>
                    </div>
                </div>
            </div>
        </div>
    </section>
</section>

<section>
    <section id="janken" class="text-gray-600 body-font">
        <div class="container px-5 py-6 mx-auto">
            <div class="flex flex-wrap -m-4 text-center">
                <div id="join0" class="p-4 sm:w-1/4 w-1/2">
                    <div id="cpu_hands0"></div>
                    <img src="img/onepiece01_luffy.png" alt="">
                    <h2 id="player0" class="title-font font-medium sm:text-4xl text-3xl text-gray-900">ルフィ</h2>
                </div>
                <div id="join1" class="p-4 sm:w-1/4 w-1/2">
                    <div id="cpu_hands1"></div>
                    <img src="img/onepiece02_zoro_bandana.png" alt="">
                    <h2 id="player1" class="title-font font-medium sm:text-4xl text-3xl text-gray-900">ゾロ</h2>
                </div>
                <div id="join2" class="p-4 sm:w-1/4 w-1/2">
                    <div id="cpu_hands2"></div>
                    <img src="img/onepiece03_nami.png" alt="">
                    <h2 id="player2" class="title-font font-medium sm:text-4xl text-3xl text-gray-900">ナミ</h2>
                </div>
                <div id="join3" class="p-4 sm:w-1/4 w-1/2">
                    <div id="cpu_hands3"></div>
                    <img src="img/onepiece04_usopp_sogeking.png" alt="">
                    <h2 id="player3" class="title-font font-medium sm:text-4xl text-3xl text-gray-900">そげキング</h2>
                </div>
                <!-- <div id="join4" class="p-4 sm:w-1/4 w-1/2">
                    <div id="cpu_hands4"></div>
                    <img src="img/onepiece05_sanji.png" alt="">
                    <h2 id="player4" class="title-font font-medium sm:text-4xl text-3xl text-gray-900">サンジ</h2>
                </div>
                <div id="join5" class="p-4 sm:w-1/4 w-1/2">
                    <div id="cpu_hands5"></div>
                    <img src="img/onepiece06_chopper.png" alt="">
                    <h2 id="player5" class="title-font font-medium sm:text-4xl text-3xl text-gray-900">チョッパー</h2>
                </div> -->
            </div>
        </div>
    </section>
</section>
<div class="flex flex-col text-center w-full mt-14">
    <p class="lg:w-2/3 mx-auto leading-relaxed text-base">今後のための作戦をメモする（SAVEボタンを忘れずに）</p>
</div>

<section>
    <section class="text-gray-600 body-font">
        <div class="container px-5 mx-auto">
            <div class="flex flex-col text-center w-full mb-14">
                <div id="notespace" class="flex justify-center my-2">
                    <div class="w-1/4 ">
                        <button id="save" class="flex mx-auto text-white bg-gray-500 border-0 py-2 px-12 focus:outline-none hover:bg-indigo-600 rounded text-lg">SAVE</button>
                        <button id="clear" class="flex mx-auto mt-4 text-white bg-gray-500 border-0 py-2 px-10 focus:outline-none hover:bg-indigo-600 rounded text-lg">CLEAR</button>
                    </div>
                    <textarea name="" id="memo" cols="30" rows="4" placeholder="クイズから得た学びを記述する" class="w-full bg-gray-100 py-1 px-2"></textarea>
                </div>
                <!-- <textarea name="" id="memo" cols="30" rows="2" placeholder="マスランダムたちの特徴を記載できます" class="bg-gray-100"></textarea> -->
            </div>
        </div>
    </div>
</div>
<div style="width:500px;" >
    <canvas id="pie"></canvas>
</div>
<footer class="text-gray-600 body-font">
    <div class="container px-5 py-8 mx-auto flex items-center sm:flex-row flex-col">
        <a class="flex title-font font-medium items-center md:justify-start justify-center text-gray-900">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-10 h-10 text-white p-2 bg-indigo-500 rounded-full" viewBox="0 0 24 24">
            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
        </svg>
        <span class="ml-3 text-xl">4人揃えてワンピースごっこ</span>
        </a>
        <p class="text-sm text-gray-500 sm:ml-4 sm:pl-4 sm:border-l-2 sm:border-gray-200 sm:py-2 sm:mt-0 mt-4">© 2xxx  新時代 —
        <a href="https://twitter.com/knyttneve" class="text-gray-600 ml-1" rel="noopener noreferrer" target="_blank">@チーズアカデミー</a>
        </p>
    </div>
</footer>

<!-- jqueryを先に記載する -->
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script>

$("#save").on("click",function(){
    const memo=$("#memo").val();
    localStorage.setItem("memo",memo);
    alert("保存しました");
});
$("#clear").on("click",function(){
    localStorage.removeItem("memo");
    alert("削除しました");
    $("#memo").val("");
});
if(localStorage.getItem("memo",memo)){
    const value=localStorage.getItem("memo");
    $("#memo").val(value);
}

// let i=0;
let point=0;

function shuffleArray(array) {
    for (let i=array.length-1; i>0; i--) {
    const j = Math.floor(Math.random() * (i+1));
    [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

const questions = [
    {
        question: "ワンピースの主人公は誰でしょうか？",
        choices: ["ルフィ", "悟空", "桜木花道","竈門炭治郎"],
        value:"0",
        kotae: 0,
    },
    {
        question: "麦わらの一味の最初の仲間は誰でしょうか？",
        choices: ["ウソップ", "ゾロ", "ナミ","チョッパー"],
        value:"1",
        kotae: 1,
    },
    {
        question: "麦わらの一味の2人目の仲間は誰でしょうか？",
        choices: ["ウソップ", "サンジ", "ナミ","チョッパー"],
        value:"2",
        kotae: 2,
    },
    {
        question: "麦わらの一味の3人目の仲間は誰でしょうか？",
        choices: ["サンジ", "ロビン","チョッパー","ウソップ"],
        value:"3",
        kotae: 3,
    },
    {
        question: "ワンピースのマンガ連載開始はいつからでしょうか？",
        choices: ["1995年", "1996年","1997年","1998年"],
        value:"2",
        kotae: 2,
    },
    {
        question: "ワンピースのアニメ放送開始はいつからでしょうか？",
        choices: ["1998年", "1999年","2000年","2001年"],
        value:"1",
        kotae: 1,
    },
    {
        question: "以下のなかで最も放送話数が多いアニメはどれでしょうか？",
        choices: ["クレしん", "名探偵コナン","はなかっぱ","ONE PIECE"],
        value:"0",
        kotae: 0,
    },
    {
        question: "ONE PIECE連載1000話記念のキャラクター世界人気投票1位は誰でしょうか？",
        choices: ["サボ", "ポートガス・D・エース","トラファルガー・ロー","ルフィ"],
        value:"3",
        kotae: 3,
    },
    {
        question: "ONE ONE PIECEの作者は？",
        choices: ["枕草子", "村上春樹","尾田栄一郎","与謝野晶子"],
        value:"2",
        kotae: 2,
    },
    {
        question: "懸賞金が最も高いのは？",
        choices: ["バギー", "ルフィ","トラファルガー・ロー","ユースタス・キッド"],
        value:"0",
        kotae: 0,
    },
    {
        question: "アニメにおいて、最も最近仲間になったメンバーは？",
        choices: ["ブルック", "フランキー","ジンベエ","ティーチ"],
        value:"2",
        kotae: 2,
    },
];

let shuffledQuestions=shuffleArray(questions);
let currentQuestion=0;


function quests(a){ 
    $("#qno").html(a+1);
    $("#question").html(questions[a].question);
    $("#choices0").text(questions[a].choices[0]);
    $("#choices1").text(questions[a].choices[1]);
    $("#choices2").text(questions[a].choices[2]);
    $("#choices3").text(questions[a].choices[3]);
}

$("#start").on("click",function(){
    $("#start").fadeOut(1500);
    $("#question").fadeIn(1500);
    quests(currentQuestion);
        $("[name=choices]").on("click",function(){
            if($(this).data("value")==questions[currentQuestion].kotae){
                alert("正解");
                point++;
                // if(currentQuestion==0||currentQuestion==0);
                if(point==1){
                    $("#join"+[point-1]).fadeIn(1000);
                };
                if(point==2){
                    $("#join"+[point-1]).fadeIn(1000);
                };
                if(point==3){
                    $("#join"+[point-1]).fadeIn(1000);
                };
                if(point==4){
                    $("#join"+[point-1]).fadeIn(1000);
                }
            }else{
                alert("間違い");
            }
        currentQuestion++;
        if(point==4){
            alert(`おめでとう！${point}個正解で、じゃんけんできるよ！`);
            $("#qnop").fadeOut(1500);
            $("#question").fadeOut(1500);
            $("#quiz").fadeOut(1500);
            $("#j_start").fadeIn(2000);
        }else if(currentQuestion<shuffledQuestions.length) {
            quests(currentQuestion);
        }else{
            alert(`${currentQuestion}問中${point}個しか正解していないですよ…。さては…ワンピースほとんど見ていないですね？`);
            $("#qnop").fadeOut(1500);
            $("#question").fadeOut(1500);
            $("#quiz").fadeOut(1500);
            $("#reset").fadeIn(2000);
        };
    });
});

// $("#start").on("click",function(){
// quests(i);
//     $("[name=choices]").on("click",function(){
//         if($(this).data("value")==questions[i].kotae){
//             alert("正解");
//             point++;
//             $("#join"+[i]).fadeIn(1000);
//         }else{
//             alert("間違い");
//         }
//     i++;
//     if(i<questions.length){
//         quests(i);
//     }else{
//         alert(`終了です！正解は${point}個です。正解率は${point}/${i}です`);
//         $("#start").fadeOut(1500);
//         $("#qnop").fadeOut(2000);
//         $("#question").fadeOut(2000);
//         $("#quiz").fadeOut(2000);
//         $("#j_start").fadeIn(2000);
//     }
// });
// });

//ベースとなる値を置く（ランダムによるジャンケンの値）
const cpu_hands0 =Math.ceil(Math.random()*3);
const cpu_hands1 =Math.ceil(Math.random()*3);
const cpu_hands2 =Math.ceil(Math.random()*3);
const cpu_hands3 =Math.ceil(Math.random()*3);
// const cpu_hands4 =Math.ceil(Math.random()*3);
// const cpu_hands5 =Math.ceil(Math.random()*3);

//ベースとなる値を置く（表示場所）
let view0="";
let view1="";
let view2="";
let view3="";
// let view4="";
// let view5="";

//ベースとなる値を置く（成功の条件たるグー数のカウント）
let gunum=0


$("#j_start").on("click",function(){
    if(cpu_hands0==1){
        view0='<img src="img/gu.png" alt="">';
        $("#cpu_hands0").html(view0);
        gunum+=1;
    }else if(cpu_hands0==2){
        view0='<img src="img/cho.png" alt="">';
        $("#cpu_hands0").html(view0);
    }else if(cpu_hands0==3){
        view0='<img src="img/par.png" alt="">';
        $("#cpu_hands0").html(view0);
    }
    if(cpu_hands1==1){
        view1='<img src="img/gu.png" alt="">';
        $("#cpu_hands1").html(view1);
        gunum+=1;
    }else if(cpu_hands1==2){
        view1='<img src="img/cho.png" alt="">';
        $("#cpu_hands1").html(view1);
    }else if(cpu_hands1==3){
        view1='<img src="img/par.png" alt="">';
        $("#cpu_hands1").html(view1);
    }
    if(cpu_hands2==1){
        view2='<img src="img/gu.png" alt="">';
        $("#cpu_hands2").html(view2);
        gunum+=1;
    }else if(cpu_hands2==2){
        view2='<img src="img/cho.png" alt="">';
        $("#cpu_hands2").html(view2);
    }else if(cpu_hands2==3){
        view2='<img src="img/par.png" alt="">';
        $("#cpu_hands2").html(view2);
    }
    if(cpu_hands3==1){
        view3='<img src="img/gu.png" alt="">';
        $("#cpu_hands3").html(view3);
        gunum+=1;
    }else if(cpu_hands3==2){
        view3='<img src="img/cho.png" alt="">';
        $("#cpu_hands3").html(view3);
    }else if(cpu_hands3==3){
        view3='<img src="img/par.png" alt="">';
        $("#cpu_hands3").html(view3);
    }
    // if(cpu_hands4==1){
    //     view4='<img src="img/gu.png" alt="">';
    //     $("#cpu_hands4").html(view4);
    //     gunum+=1;
    // }else if(cpu_hands4==2){
    //     view4='<img src="img/cho.png" alt="">';
    //     $("#cpu_hands4").html(view4);
    // }else if(cpu_hands4==3){
    //     view4='<img src="img/par.png" alt="">';
    //     $("#cpu_hands4").html(view4);
    // }
    // if(cpu_hands5==1){
    //     view5='<img src="img/gu.png" alt="">';
    //     $("#cpu_hands5").html(view5);
    //     gunum+=1;
    // }else if(cpu_hands5==2){
    //     view5='<img src="img/cho.png" alt="">';
    //     $("#cpu_hands5").html(view5);
    // }else if(cpu_hands5==3){
    //     view5='<img src="img/par.png" alt="">';
    //     $("#cpu_hands5").html(view5);
    // }
    if(cpu_hands0===cpu_hands1===cpu_hands2===cpu_hands3===1){;
        $("#game").fadeIn(800);
        $("#judge").html("成功",);
        $("#judge").css("fontSize","48px");
        $("#judge").css("color","orangered");
        $("#gunum").html(gunum);
        $("#j_start").fadeOut(1000);
        $("#reset").fadeIn(2000);
    }else{
        $("#game").fadeIn(800);
        $("#judge").html("失敗");
        $("#judge").css("fontSize","48px");
        $("#judge").css("color","blue");
        $("#gunum").html(gunum);
        $("#j_start").fadeOut(1000);
        $("#reset").fadeIn(2000);
    }
});

$('#reset').click(function() {
    location.reload();
});


//     if(cpu_hands0==1){
//         view0='<img src="img/gu.png" alt="">';
//         $("#cpu_hands0").html(view0);
//         gunum+=1;
//     }else if(cpu_hands0==2){
//         view0='<img src="img/cho.png" alt="">';
//         $("#cpu_hands0").html(view0);
//     }else if(cpu_hands0==3){
//         view0='<img src="img/par.png" alt="">';
//         $("#cpu_hands0").html(view0);
//     }
// });

</script>

</body>
</html>